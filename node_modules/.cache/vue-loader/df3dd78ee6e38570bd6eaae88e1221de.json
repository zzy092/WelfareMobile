{"remainingRequest":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\Welfare_New_System\\welfare_mobile\\src\\views\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\src\\views\\login\\Login.vue","mtime":1617439471724},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtZDUgZnJvbSAianMtbWQ1IjsKCi8vIGltcG9ydCBMb2dpbk5hdkJhciBmcm9tICIuL2NoaWxkQ29tcHMvTG9naW5OYXZCYXIiOwoKaW1wb3J0IHsgYWNjb3VudExvZ2luICxhY2NvdW50TG9naW5EZWZhdWx0fSBmcm9tICJuZXR3b3JrL2xvZ2luIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9naW5OYW1lOiAibGlzYSIsCiAgICAgIGxvZ2luUGFzc3dvcmQ6ICJuYXd4czIuLjIiLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luKCkgewogICAgICBsZXQgbWQ1UHdkID0gbWQ1KHRoaXMubG9naW5QYXNzd29yZCk7CiAgICAgIGxldCBjb3JwaWQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmNvcnBpZFZhbHVlOyAvL3RoaXMuJHN0b3JlLmNvcnBpZDsKICAgICAgY29uc3Qgb2JqID0ge307CiAgICAgIG9iai5sb2dpbk5hbWUgPSB0aGlzLmxvZ2luTmFtZTsKICAgICAgb2JqLnBhc3N3b3JkID0gbWQ1UHdkOwogICAgICBvYmouY29ycGlkID0gY29ycGlkOwogICAgICBvYmouZGV2aWNlVHlwZSA9IDE7CiAgICAgIGxldCB0ID0gbmV3IERhdGUoKTsgLy/kvaDlt7Lnn6XnmoTml7bpl7QKICAgICAgbGV0IHRfcyA9IHQuZ2V0VGltZSgpOyAvL+i9rOWMluS4uuaXtumXtOaIs+avq+enkuaVsAogICAgICBsZXQgbnQgPSBuZXcgRGF0ZSgpOyAvL+WumuS5ieS4gOS4quaWsOaXtumXtAogICAgICBudC5zZXRUaW1lKHRfcyArIDUwMDAgKiA2MCk7IC8v6K6+572u5paw5pe26Ze05q+U5pen5pe26Ze05aSaNeWIhumSnwogICAgICBsZXQgcmVmcmVzaF9leHBpcmVzPW50LmdldFRpbWUoKTsKICAgICAgb2JqLnJlZnJlc2hfZXhwaXJlcyA9IHJlZnJlc2hfZXhwaXJlczsKICAgICAgYWNjb3VudExvZ2luKG9iaikudGhlbigocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB2YXIgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7CiAgICAgICAgICBzdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLnJlc3VsdC5hY2Nlc3NfdG9rZW4pOwoKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCh7CiAgICAgICAgICAgIHR5cGU6ICJ1cGRhdGVUb2tlbiIsCiAgICAgICAgICAgIHRva2VuOiBzdG9yYWdlLnRva2VuLAogICAgICAgICAgICBjb3JwaWQ6IHJlcy5yZXN1bHQuY29ycGlkLAogICAgICAgICAgfSk7CiAgICAgICAgICAvL+i3s+i9rOWIsOeUqOaIt+emj+WIqemmlumhtQogICAgICAgICAgY29uc29sZS5sb2coIui3s+i9rOWIsOeUqOaIt+mmlumhtSIpOwogICAgICAgICAgdmFyIGNvcnBpZD10aGlzLiRzdG9yZS5nZXR0ZXJzLmNvcnBpZFZhbHVlCiAgICAgICAgICBjb25zb2xlLmxvZyhjb3JwaWQpOwogICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9ob21lcGFnZSIsIHF1ZXJ5OiB7IGNvcnBpZCB9IH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0TWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2dpbk9sZCgpIHsKICAgICAgYWNjb3VudExvZ2luRGVmYXVsdCgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdmFyIHN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlOwogICAgICAgICAgc3RvcmFnZS5jbGVhcigpOwogICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHJlcy5yZXN1bHQuYWNjZXNzX3Rva2VuKTsKCiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoewogICAgICAgICAgICB0eXBlOiAidXBkYXRlVG9rZW4iLAogICAgICAgICAgICB0b2tlbjogc3RvcmFnZS50b2tlbiwKICAgICAgICAgICAgY29ycGlkOiByZXMucmVzdWx0LmNvcnBpZCwKICAgICAgICAgIH0pOwogICAgICAgICAgLy/ot7PovazliLDnlKjmiLfnpo/liKnpppbpobUKICAgICAgICAgIGNvbnNvbGUubG9nKCLot7PovazliLDnlKjmiLfpppbpobUiKTsKICAgICAgICAgIHZhciBjb3JwaWQ9dGhpcy4kc3RvcmUuZ2V0dGVycy5jb3JwaWRWYWx1ZQogICAgICAgICAgY29uc29sZS5sb2coY29ycGlkKTsKICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvaG9tZXBhZ2UiLCBxdWVyeTogeyBjb3JwaWQgfSB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLnJlc3VsdE1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div id=\"login\">\n    <!-- <login-nav-bar class=\"navbar\" /> -->\n    <section class=\"aui-flexView\">\n      <section class=\"aui-scrollView\">\n        <!--标题-->\n        <div class=\"aui-account-title\">\n          <h1>账号登陆</h1>\n        </div>\n        <!--账号密码-->\n        <div class=\"aui-account-tile\">\n          <div class=\"b-line\">\n            <input\n              type=\"text\"\n              v-model=\"loginName\"\n              placeholder=\"请输入登录账号\"\n              id=\"login_name\"\n            />\n            <label id=\"login_name_text\" class=\"err\">手机号不可为空</label>\n          </div>\n          <div>\n            <input\n              type=\"password\"\n              v-model=\"loginPassword\"\n              placeholder=\"请输入密码\"\n              id=\"login_password\"\n            />\n            <label class=\"err\">密码不可为空</label>\n          </div>\n        </div>\n        <!--登录按钮-->\n        <div class=\"aui-account-button\">\n          <button id=\"login_submit\" @click=\"login\">登录</button>\n        </div>\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\nimport md5 from \"js-md5\";\n\n// import LoginNavBar from \"./childComps/LoginNavBar\";\n\nimport { accountLogin ,accountLoginDefault} from \"network/login\";\n\nexport default {\n  components: {},\n  data() {\n    return {\n      loginName: \"lisa\",\n      loginPassword: \"nawxs2..2\",\n    };\n  },\n  methods: {\n    login() {\n      let md5Pwd = md5(this.loginPassword);\n      let corpid = this.$store.getters.corpidValue; //this.$store.corpid;\n      const obj = {};\n      obj.loginName = this.loginName;\n      obj.password = md5Pwd;\n      obj.corpid = corpid;\n      obj.deviceType = 1;\n      let t = new Date(); //你已知的时间\n      let t_s = t.getTime(); //转化为时间戳毫秒数\n      let nt = new Date(); //定义一个新时间\n      nt.setTime(t_s + 5000 * 60); //设置新时间比旧时间多5分钟\n      let refresh_expires=nt.getTime();\n      obj.refresh_expires = refresh_expires;\n      accountLogin(obj).then((res) => {\n        if (res.success) {\n          var storage = window.localStorage;\n          storage.clear();\n          storage.setItem(\"token\", res.result.access_token);\n\n          this.$store.commit({\n            type: \"updateToken\",\n            token: storage.token,\n            corpid: res.result.corpid,\n          });\n          //跳转到用户福利首页\n          console.log(\"跳转到用户首页\");\n          var corpid=this.$store.getters.corpidValue\n          console.log(corpid);\n           this.$router.push({ path: \"/homepage\", query: { corpid } });\n        } else {\n          console.log(res.resultMessage);\n        }\n      });\n    },\n    loginOld() {\n      accountLoginDefault().then((res) => {\n        if (res.success) {\n          var storage = window.localStorage;\n          storage.clear();\n          storage.setItem(\"token\", res.result.access_token);\n\n          this.$store.commit({\n            type: \"updateToken\",\n            token: storage.token,\n            corpid: res.result.corpid,\n          });\n          //跳转到用户福利首页\n          console.log(\"跳转到用户首页\");\n          var corpid=this.$store.getters.corpidValue\n          console.log(corpid);\n           this.$router.push({ path: \"/homepage\", query: { corpid } });\n        } else {\n          console.log(res.resultMessage);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n#login {\n  width: 100vw;\n  height: 100vh;\n  position: relative;\n  background-image: url(../../assets/img/login/bg.png);\n  background-size: cover;\n}\n\n.aui-flexView h1 {\n  margin: 0;\n}\n</style>\n"]}]}