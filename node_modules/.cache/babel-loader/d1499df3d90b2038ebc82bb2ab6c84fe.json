{"remainingRequest":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\Welfare_New_System\\welfare_mobile\\src\\views\\orderJD\\confirmOrder\\ConfirmOrderJD.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\src\\views\\orderJD\\confirmOrder\\ConfirmOrderJD.vue","mtime":1617696230736},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IERlZkFkZHJlc3NXYXAgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2NvbmZpcm1PcmRlci9EZWZBZGRyZXNzV3JhcC52dWUiOwppbXBvcnQgT3JkZXJJbmZvV3JhcCBmcm9tICJjb21wb25lbnRzL2NvbnRlbnQvY29uZmlybU9yZGVyL09yZGVySW5mb1dyYXAudnVlIjsKaW1wb3J0IE9yZGVyTmF2QmFyIGZyb20gIi4uLy4uL2pkQ29uZmlybU9yZGVyL2NoaWxkQ29tcHMvT3JkZXJOYXZCYXIudnVlIjsKaW1wb3J0IENoZWNrT3V0IGZyb20gIi4vY2hpbGRDb21wcy9DaGVja091dCI7CmltcG9ydCB7IGdldE1hc3RBZGRyZXNzIH0gZnJvbSAibmV0d29yay9hZGRyZXNzIjsKaW1wb3J0IHsgZ2V0T3JkZXJGcmVpZ2h0LCBzdWJtaXRPcmRlciB9IGZyb20gIm5ldHdvcmsvamRPcmRlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBPcmRlck5hdkJhcjogT3JkZXJOYXZCYXIsCiAgICBEZWZBZGRyZXNzV2FwOiBEZWZBZGRyZXNzV2FwLAogICAgT3JkZXJJbmZvV3JhcDogT3JkZXJJbmZvV3JhcCwKICAgIENoZWNrT3V0OiBDaGVja091dAogIH0sCiAgbmFtZTogIkpkQ29uZmlybU9yZGVyIiwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5fZ2V0TWFzdEFkZHJlc3MoKTsKCiAgICB0aGlzLl9zZXRPcmRlckluZm8oKTsKCiAgICB0aGlzLl9nZXRPcmRlckZyZWlnaHQoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZBZGRyZXNzOiB7fSwKICAgICAgb3JkZXJJbmZvOiBbXSwKICAgICAgY2hlY2tJbmZvOiB7fSwKICAgICAgZnJlaWdodDogMCwKICAgICAgb3JkZXJQcmljZTogMCwKICAgICAgYWRkcmVzc0lkOiAwLAogICAgICBpc2RlZkFkZHJlc3M6IGZhbHNlLAogICAgICBpc0ZyZWlnaHQ6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgX3NldE9yZGVySW5mbzogZnVuY3Rpb24gX3NldE9yZGVySW5mbygpIHsKICAgICAgLy/llYblk4Hor6bmg4UKICAgICAgdmFyIHN1dW1pdFR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5zdWJtaXRUeXBlOyAvLz09MSDotK3nianovabmj5DkuqQKCiAgICAgIGlmIChzdXVtaXRUeXBlID09ICIxIikgewogICAgICAgIHRoaXMub3JkZXJJbmZvID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJjb25maXJtSXRlbXMiKSB8fCAie30iKTsKICAgICAgfQogICAgfSwKICAgIF9nZXRNYXN0QWRkcmVzczogZnVuY3Rpb24gX2dldE1hc3RBZGRyZXNzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy/pu5jorqTmlLbotKflnLDlnYAKICAgICAgZ2V0TWFzdEFkZHJlc3MoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzLmlzZGVmQWRkcmVzcyA9IHRydWU7CiAgICAgICAgICBfdGhpcy5hZGRyZXNzSWQgPSByZXMucmVzdWx0LmlkOwogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KHsKICAgICAgICAgICAgdHlwZTogInNldERlZkFkZHJlc3MiLAogICAgICAgICAgICBkZWZBZGRyZXNzOiByZXMucmVzdWx0LmFyZWFfc3RyX2lkcwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMuZGVmQWRkcmVzcyA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBfZ2V0T3JkZXJGcmVpZ2h0OiBmdW5jdGlvbiBfZ2V0T3JkZXJGcmVpZ2h0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8v6K6i5Y2V6L+Q6LS5CiAgICAgIHZhciBxdWVyeU1vZGVsID0gbmV3IE9iamVjdCgpOwogICAgICBxdWVyeU1vZGVsLmRlZkFkZHJlc3MgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldERlZkFkZHJlc3M7CiAgICAgIHF1ZXJ5TW9kZWwuc2t1VXVtcyA9IHRoaXMuZ2V0U2t1KCk7CiAgICAgIGdldE9yZGVyRnJlaWdodChxdWVyeU1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzMi5pc0ZyZWlnaHQgPSB0cnVlOwogICAgICAgICAgX3RoaXMyLmZyZWlnaHQgPSByZXMucmVzdWx0LmZyZWlnaHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtT3JkZXI6IGZ1bmN0aW9uIGNvbmZpcm1PcmRlcigpIHsKICAgICAgLy/mj5DkuqTorqLljZUKICAgICAgdmFyIHF1ZXJ5TW9kZWwgPSBuZXcgT2JqZWN0KCk7CiAgICAgIHF1ZXJ5TW9kZWwuYWRkcmVzc0lkID0gdGhpcy5hZGRyZXNzSWQ7CiAgICAgIHF1ZXJ5TW9kZWwuc2t1cyA9IHRoaXMuZ2V0U2t1KCk7CiAgICAgIHF1ZXJ5TW9kZWwucGF5TW9uZXkgPSB0aGlzLm9yZGVyUHJpY2UgKyB0aGlzLmZyZWlnaHQ7CiAgICAgIHN1Ym1pdE9yZGVyKHF1ZXJ5TW9kZWwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmj5DkuqTorqLljZXmiJDlip8nKTsgLy/mkLrluKborqLljZVpZCDot7Povawg5pSv5LuY6aG16Z2iCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRNZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldFNrdTogZnVuY3Rpb24gZ2V0U2t1KCkgewogICAgICB2YXIgbGlzdFNrdU1vZGVsID0gW107CiAgICAgIHRoaXMub3JkZXJJbmZvLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB2YXIgc2t1TW9kZWwgPSB7fTsKICAgICAgICBza3VNb2RlbC5za3VJZCA9IGVsZW1lbnQuc2t1aWQ7CiAgICAgICAgc2t1TW9kZWwubnVtID0gZWxlbWVudC5wcm9kdWN0X251bTsKICAgICAgICBsaXN0U2t1TW9kZWwucHVzaChza3VNb2RlbCk7CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlzdFNrdU1vZGVsOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9yZGVySW5mbzogZnVuY3Rpb24gb3JkZXJJbmZvKCkgewogICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5vcmRlckluZm8pLmxlbmd0aCAhPT0gMCkgewogICAgICAgIHRoaXMub3JkZXJQcmljZSA9IHRoaXMub3JkZXJJbmZvLnJlZHVjZShmdW5jdGlvbiAocHJlVmFsdWUsIGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBwcmVWYWx1ZSArIGl0ZW0ucHJvZHVjdF9udW0gKiBpdGVtLnByb2R1Y3RfcHRwcmljZTsKICAgICAgICB9LCAwKS50b0ZpeGVkKDIpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ConfirmOrderJD.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"jdconfirmorder\" v-if=\"this.$route.query.submitType != undefined\">\n    <order-nav-bar />\n\n    <def-address-wap :defAddress=\"defAddress\" />\n    <order-info-wrap :orderInfo=\"orderInfo\" />\n    <check-out :orderPrice=\"orderPrice\" :freightPrice=\"freight\" />\n    <div v-if=\"isdefAddress&&isFreight\">\n      <button @click=\"confirmOrder\">在线支付</button>\n    </div>\n  </div>\n  <div v-else>\n    <h1>无效的请求</h1>\n  </div>\n</template>\n\n<script>\nimport DefAddressWap from \"components/content/confirmOrder/DefAddressWrap.vue\";\nimport OrderInfoWrap from \"components/content/confirmOrder/OrderInfoWrap.vue\";\n\nimport OrderNavBar from \"../../jdConfirmOrder/childComps/OrderNavBar.vue\";\nimport CheckOut from \"./childComps/CheckOut\";\n\nimport { getMastAddress } from \"network/address\";\nimport { getOrderFreight, submitOrder } from \"network/jdOrder\";\nexport default {\n  components: {\n    OrderNavBar,\n    DefAddressWap,\n    OrderInfoWrap,\n    CheckOut,\n  },\n  name: \"JdConfirmOrder\",\n  created() {\n    this._getMastAddress();\n    this._setOrderInfo();\n    this._getOrderFreight();\n  },\n  data() {\n    return {\n      defAddress: {},\n      orderInfo: [],\n      checkInfo: {},\n      freight: 0,\n      orderPrice: 0,\n      addressId: 0,\n      isdefAddress: false,\n      isFreight: false,\n    };\n  },\n  methods: {\n    _setOrderInfo() { //商品详情\n      const suumitType = this.$route.query.submitType;\n      //==1 购物车提交\n      if (suumitType == \"1\") {\n        this.orderInfo=JSON.parse(sessionStorage.getItem(\"confirmItems\") || \"{}\");\n      }\n    },\n    _getMastAddress() { //默认收货地址\n      getMastAddress().then((res) => {\n        if (res.success) {\n          this.isdefAddress = true;\n          this.addressId = res.result.id;\n          console.log(res);\n          this.$store.commit({\n            type: \"setDefAddress\",\n            defAddress: res.result.area_str_ids,\n          });\n          this.defAddress = res.result;\n        }\n      });\n    },\n    _getOrderFreight() {  //订单运费\n      let queryModel = new Object();\n      queryModel.defAddress = this.$store.getters.getDefAddress;\n      queryModel.skuUums = this.getSku();\n\n      getOrderFreight(queryModel).then((res) => {\n        if (res.success) {\n          this.isFreight = true;\n          this.freight = res.result.freight;\n        }\n      });\n    },\n    confirmOrder() {  //提交订单\n      let queryModel=new Object();\n      queryModel.addressId=this.addressId;\n      queryModel.skus=this.getSku();\n      queryModel.payMoney=this.orderPrice+this.freight;\n      submitOrder(queryModel).then(res=>{\n        if(res.success){\n          console.log(res);\n\n          console.log('提交订单成功');\n          //携带订单id 跳转 支付页面\n\n        }else{\n          console.log(res.resultMessage);\n        }\n      })\n    },\n    getSku() {\n      let listSkuModel = [];\n      this.orderInfo.forEach((element) => {\n        let skuModel = {};\n        skuModel.skuId = element.skuid;\n        skuModel.num = element.product_num;\n        listSkuModel.push(skuModel);\n      });\n      return listSkuModel;\n    },\n  },\n  watch: {\n    orderInfo() {\n      if (Object.keys(this.orderInfo).length !== 0) {\n        this.orderPrice = this.orderInfo\n          .reduce((preValue, item) => {\n            return preValue + item.product_num * item.product_ptprice;\n          }, 0)\n          .toFixed(2);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>\n"],"sourceRoot":"src/views/orderJD/confirmOrder"}]}