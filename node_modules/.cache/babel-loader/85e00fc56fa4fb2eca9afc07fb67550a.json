{"remainingRequest":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\code\\Welfare_New_System\\welfare_mobile\\src\\store\\actions.js","dependencies":[{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\src\\store\\actions.js","mtime":1617266865732},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\code\\Welfare_New_System\\welfare_mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgeyBhZGRTa3VDYXJ0LCB1cGRhdGVDYXJ0TnVtYmVyLCBkZWxldGVTa3VDYXJ0IH0gZnJvbSAibmV0d29yay9qZENhcnQuanMiOwp2YXIgYWN0aW9ucyA9IHsKICBkZWxldGVDYXJ0OiBmdW5jdGlvbiBkZWxldGVDYXJ0KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjb25zb2xlLmxvZygiW0FjdGlvbl0tW+i0reeJqei9pl0tW+WIoOmZpOWVhuWTgV0iKTsKICAgICAgdmFyIG9sZEluZm8gPSBjb250ZXh0LnN0YXRlLmNhcnRMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5za3VpZCA9PT0gcGF5bG9hZC5za3VNb2RlbC5za3VpZDsKICAgICAgfSk7CgogICAgICBpZiAob2xkSW5mbykgewogICAgICAgIGRlbGV0ZVNrdUNhcnQob2xkSW5mbykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgY29udGV4dC5jb21taXQoewogICAgICAgICAgICAgIHR5cGU6ICdkZWxldGVDYXJ0JywKICAgICAgICAgICAgICBnZXRtb2RlbDogcGF5bG9hZC5za3VNb2RlbAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIuW3suWIoOmZpCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIuWIoOmZpOWksei0pSIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiByZXNvbHZlKCIwMDAiKTsKICAgICAgfQogICAgfSk7CiAgfSwKICAvL+W8guatpea3u+WKoOi0reeJqei9puWVhuWTgQogIGFkZENhcnQ6IGZ1bmN0aW9uIGFkZENhcnQoY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIC8vIDEu5p+l55yL5piv5ZCm5re75Yqg6L+HCiAgICAgIHZhciBvbGRJbmZvID0gY29udGV4dC5zdGF0ZS5jYXJ0TGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uc2t1aWQgPT09IHBheWxvYWQuc2t1TW9kZWwuc2t1aWQ7CiAgICAgIH0pOyAvLyAyLuS/ruaUuSDmiJYgIOa3u+WKoAoKICAgICAgaWYgKG9sZEluZm8pIHsKICAgICAgICBjb25zb2xlLmxvZygiW0FjdGlvbl0tW+i0reeJqei9pl0tW+abtOaWsOaVsOmHj10iKTsKICAgICAgICB1cGRhdGVDYXJ0TnVtYmVyKHBheWxvYWQuc2t1TW9kZWwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KHsKICAgICAgICAgICAgICB0eXBlOiAidXBkYXRlQ2FydCIsCiAgICAgICAgICAgICAgZ2V0bW9kZWw6IHBheWxvYWQuc2t1TW9kZWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCLotK3nianovablt7Lmm7TmlrAiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLotK3nianovabmm7TmlrDplJnor6/kv6Hmga8g4oaT4oaT4oaT4oaT4oaT4oaTICIpOwogICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgi5pu05paw5aSx6LSlIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIltBY3Rpb25dLVvotK3nianovaZdLVvmt7vliqDllYblk4FdIik7CiAgICAgICAgYWRkU2t1Q2FydChwYXlsb2FkLnNrdU1vZGVsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiYWRkQ2FydCIsIHsKICAgICAgICAgICAgICBpbmZvOiBwYXlsb2FkLnNrdU1vZGVsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgi5re75Yqg5oiQ5YqfIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygi6LSt54mp6L2m5re75Yqg6ZSZ6K+v5L+h5oGvIOKGk+KGk+KGk+KGk+KGk+KGkyAiKTsgLy8gY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCLmt7vliqDlpLHotKUiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBhY3Rpb25zOw=="},{"version":3,"sources":["D:/code/Welfare_New_System/welfare_mobile/src/store/actions.js"],"names":["addSkuCart","updateCartNumber","deleteSkuCart","actions","deleteCart","context","payload","Promise","resolve","console","log","oldInfo","state","cartList","find","item","skuid","skuModel","then","res","success","commit","type","getmodel","addCart","info"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,gBAArB,EAAuCC,aAAvC,QAA4D,mBAA5D;AAEA,IAAMC,OAAO,GAAG;AACdC,EAAAA,UADc,sBACHC,OADG,EACMC,OADN,EACe;AAC3B,WAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5BC,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,UAAMC,OAAO,GAAGN,OAAO,CAACO,KAAR,CAAcC,QAAd,CAAuBC,IAAvB,CACd,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,KAAL,KAAeV,OAAO,CAACW,QAAR,CAAiBD,KAApC;AAAA,OADU,CAAhB;;AAGA,UAAIL,OAAJ,EAAa;AACXT,QAAAA,aAAa,CAACS,OAAD,CAAb,CAAuBO,IAAvB,CAA4B,UAAAC,GAAG,EAAI;AACjC,cAAIA,GAAG,CAACC,OAAR,EAAiB;AACff,YAAAA,OAAO,CAACgB,MAAR,CAAe;AACbC,cAAAA,IAAI,EAAC,YADQ;AAEbC,cAAAA,QAAQ,EAACjB,OAAO,CAACW;AAFJ,aAAf;AAIA,mBAAOT,OAAO,CAAC,KAAD,CAAd;AACD,WAND,MAMO;AACL,mBAAOA,OAAO,CAAC,MAAD,CAAd;AACD;AACF,SAVD;AAWD,OAZD,MAYO;AACL,eAAOA,OAAO,CAAC,KAAD,CAAd;AACD;AACF,KApBM,CAAP;AAqBD,GAvBa;AAwBd;AACAgB,EAAAA,OAzBc,mBAyBNnB,OAzBM,EAyBGC,OAzBH,EAyBY;AACxB,WAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B;AACA,UAAMG,OAAO,GAAGN,OAAO,CAACO,KAAR,CAAcC,QAAd,CAAuBC,IAAvB,CACd,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,KAAL,KAAeV,OAAO,CAACW,QAAR,CAAiBD,KAApC;AAAA,OADU,CAAhB,CAF4B,CAM5B;;AACA,UAAIL,OAAJ,EAAa;AACXF,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAT,QAAAA,gBAAgB,CAACK,OAAO,CAACW,QAAT,CAAhB,CAAmCC,IAAnC,CAAwC,UAAAC,GAAG,EAAI;AAC7C,cAAIA,GAAG,CAACC,OAAR,EAAiB;AACff,YAAAA,OAAO,CAACgB,MAAR,CAAe;AACbC,cAAAA,IAAI,EAAE,YADO;AAEbC,cAAAA,QAAQ,EAAEjB,OAAO,CAACW;AAFL,aAAf;AAIA,mBAAOT,OAAO,CAAC,QAAD,CAAd;AACD,WAND,MAMO;AACLC,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,mBAAOF,OAAO,CAAC,MAAD,CAAd;AACD;AACF,SAXD;AAYD,OAdD,MAcO;AACLC,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAV,QAAAA,UAAU,CAACM,OAAO,CAACW,QAAT,CAAV,CAA6BC,IAA7B,CAAkC,UAAAC,GAAG,EAAI;AACvC,cAAIA,GAAG,CAACC,OAAR,EAAiB;AACff,YAAAA,OAAO,CAACgB,MAAR,CAAe,SAAf,EAA0B;AAAEI,cAAAA,IAAI,EAAEnB,OAAO,CAACW;AAAhB,aAA1B;AACA,mBAAOT,OAAO,CAAC,MAAD,CAAd;AACD,WAHD,MAGO;AACLC,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EADK,CAEL;;AACA,mBAAOF,OAAO,CAAC,MAAD,CAAd;AACD;AACF,SATD;AAUD;AACF,KAlCM,CAAP;AAmCD;AA7Da,CAAhB;AAgEA,eAAeL,OAAf","sourcesContent":["import { addSkuCart, updateCartNumber, deleteSkuCart } from \"network/jdCart.js\";\n\nconst actions = {\n  deleteCart(context, payload) {\n    return new Promise(resolve => {\n      console.log(\"[Action]-[购物车]-[删除商品]\");\n      const oldInfo = context.state.cartList.find(\n        item => item.skuid === payload.skuModel.skuid\n      );\n      if (oldInfo) {\n        deleteSkuCart(oldInfo).then(res => {\n          if (res.success) {\n            context.commit({\n              type:'deleteCart',\n              getmodel:payload.skuModel\n            })\n            return resolve(\"已删除\");\n          } else {\n            return resolve(\"删除失败\");\n          }\n        });\n      } else {\n        return resolve(\"000\");\n      }\n    });\n  },\n  //异步添加购物车商品\n  addCart(context, payload) {\n    return new Promise(resolve => {\n      // 1.查看是否添加过\n      const oldInfo = context.state.cartList.find(\n        item => item.skuid === payload.skuModel.skuid\n      );\n\n      // 2.修改 或  添加\n      if (oldInfo) {\n        console.log(\"[Action]-[购物车]-[更新数量]\");\n        updateCartNumber(payload.skuModel).then(res => {\n          if (res.success) {\n            context.commit({\n              type: \"updateCart\",\n              getmodel: payload.skuModel\n            });\n            return resolve(\"购物车已更新\");\n          } else {\n            console.log(\"购物车更新错误信息 ↓↓↓↓↓↓ \");\n            return resolve(\"更新失败\");\n          }\n        });\n      } else {\n        console.log(\"[Action]-[购物车]-[添加商品]\");\n        addSkuCart(payload.skuModel).then(res => {\n          if (res.success) {\n            context.commit(\"addCart\", { info: payload.skuModel });\n            return resolve(\"添加成功\");\n          } else {\n            console.log(\"购物车添加错误信息 ↓↓↓↓↓↓ \");\n            // console.log(res);\n            return resolve(\"添加失败\");\n          }\n        });\n      }\n    });\n  }\n};\n\nexport default actions;\n"]}]}